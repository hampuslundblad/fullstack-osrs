import{r as t,j as s,c as l,S as j,a as y,u as N,b as w,L as T,d as R,A as g}from"./index-D_wKpJaJ.js";const x=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:a,className:l("w-full caption-bottom text-sm",e),...r})}));x.displayName="Table";const p=t.forwardRef(({className:e,...r},a)=>s.jsx("thead",{ref:a,className:l("[&_tr]:border-b",e),...r}));p.displayName="TableHeader";const b=t.forwardRef(({className:e,...r},a)=>s.jsx("tbody",{ref:a,className:l("[&_tr:last-child]:border-0",e),...r}));b.displayName="TableBody";const v=t.forwardRef(({className:e,...r},a)=>s.jsx("tfoot",{ref:a,className:l("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r}));v.displayName="TableFooter";const d=t.forwardRef(({className:e,...r},a)=>s.jsx("tr",{ref:a,className:l("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));d.displayName="TableRow";const f=t.forwardRef(({className:e,...r},a)=>s.jsx("th",{ref:a,className:l("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));f.displayName="TableHead";const m=t.forwardRef(({className:e,...r},a)=>s.jsx("td",{ref:a,className:l("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));m.displayName="TableCell";const h=t.forwardRef(({className:e,...r},a)=>s.jsx("caption",{ref:a,className:l("mt-4 text-sm text-muted-foreground",e),...r}));h.displayName="TableCaption";const k=({headings:e,tableData:r,caption:a,isLoading:i=!1})=>s.jsxs(x,{children:[a?s.jsxs(h,{children:[" ",a," "]}):void 0,s.jsx(p,{children:s.jsx(d,{children:e.map(o=>s.jsxs(f,{children:[" ",o]},o))})}),s.jsxs(b,{children:[i&&s.jsx(s.Fragment,{children:[...Array(3)].map((o,n)=>s.jsx(d,{children:e.map(c=>s.jsx(m,{children:s.jsx(j,{className:"h-4 w-20"})},c+n))},n))}),r&&r.length>0&&r.map((o,n)=>s.jsx(d,{children:Object.keys(o).map((c,u)=>s.jsx(m,{children:o[c]},c+u))},"row"+n))]})]});async function H(e){return(await y.get(`hiscore/${e}`)).data}const C=e=>N({queryKey:["player-hiscore",e],queryFn:()=>S(e),enabled:!!e,retry:0,staleTime:1e3*60*5}),S=async e=>{const r=await H(e);return{...r,skills:r.skills.map(a=>({name:a.name,level:a.level,experience:a.experience,rank:a.rank}))}},A=w("/hiscore")({component:F});function F(){const[e,r]=t.useState(""),{data:a,isLoading:i,isError:o}=C(e);return s.jsx(T,{title:"Hiscore",children:s.jsxs("div",{className:"mt-4 flex flex-col gap-8 w-1/2",children:[s.jsx(R,{id:"username-input",label:"Username",onSearch:n=>r(n)}),o&&s.jsx(g,{title:"Error",description:`An error occured when fetching the hiscore for ${e}`}),s.jsx(k,{headings:["Skill","Level","XP","Rank"],tableData:a==null?void 0:a.skills,isLoading:i})]})})}export{A as Route};
